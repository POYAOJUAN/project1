[["index.html", "社會科學統計方法 Chapter 1 資料讀取 1.1 設定路徑 1.2 tidyverse 與 Base R 1.3 讀取 CSV 1.4 讀取 TXT 1.5 讀取 STATA 1.6 讀取 SPSS 1.7 讀取網路 CSV 1.8 其他讀取問題 1.9 資料匯出", " 社會科學統計方法 PO-YAO JUAN 2021-03-11 Chapter 1 資料讀取 1.1 設定路徑 getwd() setwd(&quot;C:/Users/Juan/Desktop/rproject/rproject&quot;) #set your project 1.2 tidyverse 與 Base R 資料讀取會依照不同的資料型態有不同的套件讀取方式。 base R readr：.csv and .txt readxl：.xls or .xlsx haven foreign sjlabelled：.sav (SPSS) readstata13：.dta (STATA) library(tidyverse) NOTE： 因為載入tidyverse套件出現的衝突訊息表示它複寫了基礎R的一些函式，如果你想要使用stats裡面的filter()以及lag()這兩個函式，則必須使用其完整名稱stats::filter()以及stats::lag()。 1.3 讀取 CSV 根據R for Data Science by Garrett Grolemund, Hadley Wickham: Data Import作者描述。 readr套件與Base R做比較有以下三個優點： 效率更高(大約10倍) 會產生tibbles，且不會將字元向量轉為因子(factor)，或使用資料列名稱，或是亂改資料欄名稱。 基礎R的函式會從你的作業系統與環境變數繼承一些行為，所以在你的電腦上可運作的資料匯入程式碼在別人的電腦上可能行不通。 readr套件的函式： read_csv()：讀取逗號分隔檔 read_csv2()：讀取分號分隔檔 (因為有許多國家使用 , 為小數點使用) read_tsv()：讀取tab分隔檔 read_delim()：讀取任何分隔符號 read.csv ## function (file, header = TRUE, sep = &quot;,&quot;, quote = &quot;\\&quot;&quot;, dec = &quot;.&quot;, ## fill = TRUE, comment.char = &quot;&quot;, ...) ## read.table(file = file, header = header, sep = sep, quote = quote, ## dec = dec, fill = fill, comment.char = comment.char, ...) ## &lt;bytecode: 0x0000015730983840&gt; ## &lt;environment: namespace:utils&gt; readr::read_csv ## function (file, col_names = TRUE, col_types = NULL, locale = default_locale(), ## na = c(&quot;&quot;, &quot;NA&quot;), quoted_na = TRUE, quote = &quot;\\&quot;&quot;, comment = &quot;&quot;, ## trim_ws = TRUE, skip = 0, n_max = Inf, guess_max = min(1000, ## n_max), progress = show_progress(), skip_empty_rows = TRUE) ## { ## tokenizer &lt;- tokenizer_csv(na = na, quoted_na = quoted_na, ## quote = quote, comment = comment, trim_ws = trim_ws, ## skip_empty_rows = skip_empty_rows) ## read_delimited(file, tokenizer, col_names = col_names, col_types = col_types, ## locale = locale, skip = skip, skip_empty_rows = skip_empty_rows, ## comment = comment, n_max = n_max, guess_max = guess_max, ## progress = progress) ## } ## &lt;bytecode: 0x0000015731cd8f10&gt; ## &lt;environment: namespace:readr&gt; a &lt;- read.csv(&quot;C:/Users/Juan/Desktop/rproject/councilor.csv&quot;) class(a) ## [1] &quot;data.frame&quot; b &lt;- readr::read_csv(&quot;C:/Users/Juan/Desktop/rproject/councilor.csv&quot;, locale = locale(encoding = &quot;big5&quot;)) class(b) ## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot; &quot;tbl&quot; &quot;data.frame&quot; 如果想要了解更多請參考R for Data Science by Garrett Grolemund, Hadley Wickham: Data Import 1.4 讀取 TXT students &lt;- read.table(&quot;C:/Users/Juan/Desktop/rproject/Studentsfull.txt&quot;, header=T) students_csv &lt;- read.csv(&quot;C:/Users/Juan/Desktop/rproject/Studentsfull.txt&quot;, sep = &quot;&quot;) student_delim &lt;- read.delim(&quot;C:/Users/Juan/Desktop/rproject/Studentsfull.txt&quot;, sep = &quot;&quot;) NOTE： 這邊的用意其實是想要告訴各位，讀取方式其實不一定局限於某幾個函數，而主要是依照資料內容而定，並更改參數即可。 1.5 讀取 STATA c &lt;- readstata13::read.dta13(&quot;C:/Users/Juan/Desktop/rproject/Mystata.dta&quot;) dplyr::glimpse(c) #faster and clearer than `str()` ## Rows: 1,244 ## Columns: 21 ## $ Q1 &lt;int&gt; 0, 0, 12, 1, 0, 0, 1, 0, 0, 11, 0, 3, 2, 0, 13, 13, 11, 0, 1, 0, 1, 11, 12, 0, 1,~ ## $ Q2 &lt;int&gt; 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, ~ ## $ Q3 &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 98, 96, 1, 1, 1, 96, 1, 96, 1, 1, 1, 98, 1, 2, 1, 1, 1, 1, 9~ ## $ Q4 &lt;int&gt; 2, 2, 1, 3, 1, 4, 4, 98, 3, 3, 2, 98, 2, 2, 4, 3, 3, 3, 3, 3, 4, 96, 2, 98, 3, 98~ ## $ Q5 &lt;int&gt; 2, 3, 2, 2, 2, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 3, 3, 3, 2, 3, 1, 2, 3, 2, 3, 3, 2, ~ ## $ SEX &lt;int&gt; 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 1, ~ ## $ AGE &lt;int&gt; 2, 4, 5, 5, 4, 4, 2, 5, 1, 2, 2, 2, 5, 5, 5, 5, 4, 2, 5, 4, 4, 5, 3, 4, 1, 2, 4, ~ ## $ EDU &lt;int&gt; 5, 3, 2, 3, 3, 3, 4, 3, 5, 3, 5, 4, 2, 2, 5, 5, 5, 4, 4, 5, 4, 3, 5, 5, 5, 5, 4, ~ ## $ TOWNID &lt;int&gt; 6305, 6608, 6302, 911, 904, 6628, 6304, 6707, 6303, 6515, 6802, 6511, 6307, 6504,~ ## $ AREAR &lt;int&gt; 1, 4, 1, 5, 5, 4, 1, 5, 1, 2, 3, 2, 1, 1, 1, 3, 4, 1, 1, 6, 6, 6, 1, 4, 4, 4, 4, ~ ## $ SENGI &lt;int&gt; 2, 3, 2, 2, 2, 2, 2, 2, 2, 3, 3, 2, 2, 2, 3, 3, 2, 2, 3, 2, 2, 3, 2, 2, 1, 2, 2, ~ ## $ T_Cidentity &lt;int&gt; 1, 2, 1, 1, 3, 3, 2, 9, 9, 3, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1, 1, 9, 3, 1, 1, 2, ~ ## $ partyid &lt;fct&gt; DPP, Independent, KMT, KMT, KMT, KMT, DK, Independent, Independent, Independent, ~ ## $ PARTY &lt;int&gt; 5, 99, 2, 3, 2, 2, 99, 99, 99, 99, 2, 99, 99, 99, 99, 2, 99, 5, 99, 17, 4, 3, 99,~ ## $ tondu &lt;int&gt; 3, 4, 2, 4, 4, 2, 3, 9, 3, 4, 3, 4, 3, 4, 3, 4, 4, 5, 3, 5, 5, 4, 3, 9, 3, 3, 9, ~ ## $ tondu3 &lt;int&gt; 2, 2, 1, 2, 2, 1, 2, 9, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 3, 2, 2, 9, 2, 2, 9, ~ ## $ peace &lt;dbl&gt; 8, 4, 5, 4, 4, 6, 5, NA, 7, 8, 6, 4, 6, 5, NA, 4, 5, 6, NA, 4, 0, 5, 4, 3, 5, 5, ~ ## $ visit &lt;dbl&gt; 0, 0, 12, 1, 0, 0, 1, 0, 0, 11, 0, 3, 2, 0, 13, 13, 11, 0, 1, 0, 1, 11, 12, 0, 1,~ ## $ experience &lt;dbl&gt; 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, ~ ## $ tondu3_new &lt;dbl&gt; 1, 1, 2, 1, 1, 2, 1, NA, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 1, 3, 3, 1, 1, NA, 1, 1, N~ ## $ consensus &lt;dbl&gt; 2, 4, 4, 3, 4, 3, 2, NA, 2, 4, 3, 3, 1, 2, NA, 4, 4, 2, 3, 1, 1, 3, 3, 2, 2, 3, 3~ 1.6 讀取 SPSS d1 &lt;- foreign::read.spss(&quot;C:/Users/Juan/Desktop/rproject/PP0797B2.sav&quot;, reencode = &quot;utf-8&quot;, #not `fileEncoding` to.data.frame = T, use.value.labels=F) ## re-encoding from utf-8 class(d1) ## [1] &quot;data.frame&quot; e1 &lt;- haven::read_sav(&quot;C:/Users/Juan/Desktop/rproject/PP0797B2.sav&quot;, encoding = &quot;utf-8&quot;) #not `fileEncoding` class(e1) ## [1] &quot;tbl_df&quot; &quot;tbl&quot; &quot;data.frame&quot; NOTE： haven套件並不會讀取資料的中文標記。 1.6.1 更改資料變數示範 e1$Q1n &lt;- NA e1$Q1n[e1$Q1==1]&lt;-&#39;非常不同意&#39; e1$Q1n[e1$Q1==2]&lt;-&#39;不同意&#39; e1$Q1n[e1$Q1==3]&lt;-&#39;同意&#39; e1$Q1n[e1$Q1==4]&lt;-&#39;非常同意&#39; e1$Q1n=factor(e1$Q1n, levels=c(&#39;非常不同意&#39;,&#39;不同意&#39;,&#39;同意&#39;,&#39;非常同意&#39;)) par(bg=&#39;lightblue&#39;) #family=&quot;&quot; barplot(table(e1$Q1n), col=&#39;white&#39;) extrafont::fonts() 1.7 讀取網路 CSV 我們可以用函式讀取網路資料，以read.csv(“PATH/Website”)表示。 以紐西蘭政府資料為例：stat.govt.nz f1 &lt;- read.csv(&quot;https://www.stats.govt.nz/assets/Uploads/Annual-enterprise-survey/Annual-enterprise-survey-2019-financial-year-provisional/Download-data/annual-enterprise-survey-2019-financial-year-provisional-size-bands-csv.csv&quot;) rio::import() qurl = &#39;https://raw.githubusercontent.com/TsaiChiahung/SocialStat2018/master/Data/Advertising.csv&#39; # download tmp&lt;-rio::import(qurl) tmp_html&lt;-knitr::kable(tmp, caption=&quot;廣告公司資料&quot;, format = &#39;html&#39;) kableExtra::kable_styling(tmp_html,&#39;striped&#39;,font_size = 20 ) Table 1.1: 廣告公司資料 V1 TV radio newspaper sales 1 230.1 37.8 69.2 22.1 2 44.5 39.3 45.1 10.4 3 17.2 45.9 69.3 9.3 4 151.5 41.3 58.5 18.5 5 180.8 10.8 58.4 12.9 6 8.7 48.9 75.0 7.2 7 57.5 32.8 23.5 11.8 8 120.2 19.6 11.6 13.2 9 8.6 2.1 1.0 4.8 10 199.8 2.6 21.2 10.6 11 66.1 5.8 24.2 8.6 12 214.7 24.0 4.0 17.4 13 23.8 35.1 65.9 9.2 14 97.5 7.6 7.2 9.7 15 204.1 32.9 46.0 19.0 16 195.4 47.7 52.9 22.4 17 67.8 36.6 114.0 12.5 18 281.4 39.6 55.8 24.4 19 69.2 20.5 18.3 11.3 20 147.3 23.9 19.1 14.6 21 218.4 27.7 53.4 18.0 22 237.4 5.1 23.5 12.5 23 13.2 15.9 49.6 5.6 24 228.3 16.9 26.2 15.5 25 62.3 12.6 18.3 9.7 26 262.9 3.5 19.5 12.0 27 142.9 29.3 12.6 15.0 28 240.1 16.7 22.9 15.9 29 248.8 27.1 22.9 18.9 30 70.6 16.0 40.8 10.5 31 292.9 28.3 43.2 21.4 32 112.9 17.4 38.6 11.9 33 97.2 1.5 30.0 9.6 34 265.6 20.0 0.3 17.4 35 95.7 1.4 7.4 9.5 36 290.7 4.1 8.5 12.8 37 266.9 43.8 5.0 25.4 38 74.7 49.4 45.7 14.7 39 43.1 26.7 35.1 10.1 40 228.0 37.7 32.0 21.5 41 202.5 22.3 31.6 16.6 42 177.0 33.4 38.7 17.1 43 293.6 27.7 1.8 20.7 44 206.9 8.4 26.4 12.9 45 25.1 25.7 43.3 8.5 46 175.1 22.5 31.5 14.9 47 89.7 9.9 35.7 10.6 48 239.9 41.5 18.5 23.2 49 227.2 15.8 49.9 14.8 50 66.9 11.7 36.8 9.7 51 199.8 3.1 34.6 11.4 52 100.4 9.6 3.6 10.7 53 216.4 41.7 39.6 22.6 54 182.6 46.2 58.7 21.2 55 262.7 28.8 15.9 20.2 56 198.9 49.4 60.0 23.7 57 7.3 28.1 41.4 5.5 58 136.2 19.2 16.6 13.2 59 210.8 49.6 37.7 23.8 60 210.7 29.5 9.3 18.4 61 53.5 2.0 21.4 8.1 62 261.3 42.7 54.7 24.2 63 239.3 15.5 27.3 15.7 64 102.7 29.6 8.4 14.0 65 131.1 42.8 28.9 18.0 66 69.0 9.3 0.9 9.3 67 31.5 24.6 2.2 9.5 68 139.3 14.5 10.2 13.4 69 237.4 27.5 11.0 18.9 70 216.8 43.9 27.2 22.3 71 199.1 30.6 38.7 18.3 72 109.8 14.3 31.7 12.4 73 26.8 33.0 19.3 8.8 74 129.4 5.7 31.3 11.0 75 213.4 24.6 13.1 17.0 76 16.9 43.7 89.4 8.7 77 27.5 1.6 20.7 6.9 78 120.5 28.5 14.2 14.2 79 5.4 29.9 9.4 5.3 80 116.0 7.7 23.1 11.0 81 76.4 26.7 22.3 11.8 82 239.8 4.1 36.9 12.3 83 75.3 20.3 32.5 11.3 84 68.4 44.5 35.6 13.6 85 213.5 43.0 33.8 21.7 86 193.2 18.4 65.7 15.2 87 76.3 27.5 16.0 12.0 88 110.7 40.6 63.2 16.0 89 88.3 25.5 73.4 12.9 90 109.8 47.8 51.4 16.7 91 134.3 4.9 9.3 11.2 92 28.6 1.5 33.0 7.3 93 217.7 33.5 59.0 19.4 94 250.9 36.5 72.3 22.2 95 107.4 14.0 10.9 11.5 96 163.3 31.6 52.9 16.9 97 197.6 3.5 5.9 11.7 98 184.9 21.0 22.0 15.5 99 289.7 42.3 51.2 25.4 100 135.2 41.7 45.9 17.2 101 222.4 4.3 49.8 11.7 102 296.4 36.3 100.9 23.8 103 280.2 10.1 21.4 14.8 104 187.9 17.2 17.9 14.7 105 238.2 34.3 5.3 20.7 106 137.9 46.4 59.0 19.2 107 25.0 11.0 29.7 7.2 108 90.4 0.3 23.2 8.7 109 13.1 0.4 25.6 5.3 110 255.4 26.9 5.5 19.8 111 225.8 8.2 56.5 13.4 112 241.7 38.0 23.2 21.8 113 175.7 15.4 2.4 14.1 114 209.6 20.6 10.7 15.9 115 78.2 46.8 34.5 14.6 116 75.1 35.0 52.7 12.6 117 139.2 14.3 25.6 12.2 118 76.4 0.8 14.8 9.4 119 125.7 36.9 79.2 15.9 120 19.4 16.0 22.3 6.6 121 141.3 26.8 46.2 15.5 122 18.8 21.7 50.4 7.0 123 224.0 2.4 15.6 11.6 124 123.1 34.6 12.4 15.2 125 229.5 32.3 74.2 19.7 126 87.2 11.8 25.9 10.6 127 7.8 38.9 50.6 6.6 128 80.2 0.0 9.2 8.8 129 220.3 49.0 3.2 24.7 130 59.6 12.0 43.1 9.7 131 0.7 39.6 8.7 1.6 132 265.2 2.9 43.0 12.7 133 8.4 27.2 2.1 5.7 134 219.8 33.5 45.1 19.6 135 36.9 38.6 65.6 10.8 136 48.3 47.0 8.5 11.6 137 25.6 39.0 9.3 9.5 138 273.7 28.9 59.7 20.8 139 43.0 25.9 20.5 9.6 140 184.9 43.9 1.7 20.7 141 73.4 17.0 12.9 10.9 142 193.7 35.4 75.6 19.2 143 220.5 33.2 37.9 20.1 144 104.6 5.7 34.4 10.4 145 96.2 14.8 38.9 11.4 146 140.3 1.9 9.0 10.3 147 240.1 7.3 8.7 13.2 148 243.2 49.0 44.3 25.4 149 38.0 40.3 11.9 10.9 150 44.7 25.8 20.6 10.1 151 280.7 13.9 37.0 16.1 152 121.0 8.4 48.7 11.6 153 197.6 23.3 14.2 16.6 154 171.3 39.7 37.7 19.0 155 187.8 21.1 9.5 15.6 156 4.1 11.6 5.7 3.2 157 93.9 43.5 50.5 15.3 158 149.8 1.3 24.3 10.1 159 11.7 36.9 45.2 7.3 160 131.7 18.4 34.6 12.9 161 172.5 18.1 30.7 14.4 162 85.7 35.8 49.3 13.3 163 188.4 18.1 25.6 14.9 164 163.5 36.8 7.4 18.0 165 117.2 14.7 5.4 11.9 166 234.5 3.4 84.8 11.9 167 17.9 37.6 21.6 8.0 168 206.8 5.2 19.4 12.2 169 215.4 23.6 57.6 17.1 170 284.3 10.6 6.4 15.0 171 50.0 11.6 18.4 8.4 172 164.5 20.9 47.4 14.5 173 19.6 20.1 17.0 7.6 174 168.4 7.1 12.8 11.7 175 222.4 3.4 13.1 11.5 176 276.9 48.9 41.8 27.0 177 248.4 30.2 20.3 20.2 178 170.2 7.8 35.2 11.7 179 276.7 2.3 23.7 11.8 180 165.6 10.0 17.6 12.6 181 156.6 2.6 8.3 10.5 182 218.5 5.4 27.4 12.2 183 56.2 5.7 29.7 8.7 184 287.6 43.0 71.8 26.2 185 253.8 21.3 30.0 17.6 186 205.0 45.1 19.6 22.6 187 139.5 2.1 26.6 10.3 188 191.1 28.7 18.2 17.3 189 286.0 13.9 3.7 15.9 190 18.7 12.1 23.4 6.7 191 39.5 41.1 5.8 10.8 192 75.5 10.8 6.0 9.9 193 17.2 4.1 31.6 5.9 194 166.8 42.0 3.6 19.6 195 149.7 35.6 6.0 17.3 196 38.2 3.7 13.8 7.6 197 94.2 4.9 8.1 9.7 198 177.0 9.3 6.4 12.8 199 283.6 42.0 66.2 25.5 200 232.1 8.6 8.7 13.4 當然我們也可以嘗試抓取網路ZIP解壓縮檔： GDELT Events 1.0資料庫 download.file()&amp;unzip() temp &lt;- tempfile() #create a temp path urlfile &lt;- c(&quot;http://data.gdeltproject.org/events/20210306.export.CSV.zip&quot;) download.file(urlfile,temp, mode = &quot;wb&quot;) unzip(temp, &quot;20210306.export.CSV&quot;) online_dt &lt;- read.delim(&quot;20210306.export.CSV&quot;) 1.8 其他讀取問題 dt &lt;- read.csv(&quot;20210306.export.CSV&quot;, sep = &quot;\\t&quot;) dim(dt) ## [1] 84412 58 dt2 &lt;- read.delim(&quot;20210306.export.CSV&quot;) dim(dt2) ## [1] 84412 58 dt3 &lt;- read.table(&quot;20210306.export.CSV&quot;, sep = &quot;\\t&quot;, fill = T) #cannot read without `fill=T` dim(dt3) ## [1] 45100 58 以上我們可以很明顯發現dt3有些資料並沒有完全讀到(讀取漏行的問題)，並在加入quote參數後解決。 dt4 &lt;- read.table(&quot;20210306.export.CSV&quot;, sep = &quot;\\t&quot;, fill = T, quote = &quot;&quot;) dim(dt4) ## [1] 84413 58 檢查資料方式可以透過count.fields()檢查。 nfields1 &lt;- count.fields(&quot;20210306.export.CSV&quot;, sep=&quot;\\t&quot;) nfields1 nfields2 &lt;- count.fields(&quot;20210306.export.CSV&quot;, sep=&quot;\\t&quot;, quote = &quot;&quot;) nfields2 關於read.table()與read.delim()讀取行數問題詳細討論可以參照：Link 1.9 資料匯出 wtrie.table()、write.csv()、saveRDS() write.table(a, &quot;newdat.txt&quot;) #a = councilor.csv read.table(&quot;newdat.txt&quot;) ## Year budget unit contracter open ## 1 2015 676 水利處 台球 Yes ## 2 2016 673 新建工程處 茂盛 Yes ## 3 2016 270 新建工程處 冠君 Yes ## 4 2016 255 新建工程處 金煌 Yes ## 5 2016 235 新建工程處 聖鋒 Yes ## 6 2016 190 新建工程處 福呈 No ## 7 2015 155 公園處 盛吉 Yes ## 8 2016 154 新建工程處 茂盛 Yes ## 9 2016 142 新建工程處 冠君 Yes ## 10 2016 123 新建工程處 未發包 Yes saveRDS(a, &quot;newdat.rds&quot;) readRDS(&quot;newdat.rds&quot;) ## Year budget unit contracter open ## 1 2015 676 水利處 台球 Yes ## 2 2016 673 新建工程處 茂盛 Yes ## 3 2016 270 新建工程處 冠君 Yes ## 4 2016 255 新建工程處 金煌 Yes ## 5 2016 235 新建工程處 聖鋒 Yes ## 6 2016 190 新建工程處 福呈 No ## 7 2015 155 公園處 盛吉 Yes ## 8 2016 154 新建工程處 茂盛 Yes ## 9 2016 142 新建工程處 冠君 Yes ## 10 2016 123 新建工程處 未發包 Yes "],["資料清洗與轉換.html", "Chapter 2 資料清洗與轉換 2.1 管線(pipe)的介紹 2.2 管線使用邏輯 %&gt;% 2.3 dplyr資料轉換 2.4 reshape2", " Chapter 2 資料清洗與轉換 2.1 管線(pipe)的介紹 管線%&gt;%，源自於Stefan Milton Bache的magrittr套件。 R在載入tidyverse中的套件會自動為你載入%&gt;%，所以你通常不需要明確載入migrittr。 (例如library(dplyr)就是tidyverse的一部分) 如果你需要用到%T&gt;%、%$%、%&lt;&gt;%則需要明確載入migrittr套件。 關於第三點的延伸學習可以參考：migrittr cran、R for Data Science:pipe、我覺得寫最好的 library(magrittr) 何時該用管線? 1. 資料處裡為線性 2. 簡單(單一)輸出結果 3. 運算邏輯不超過10個 何時不該使用管線? 1. 資料處裡多元複雜的線性 2. 多個輸入與輸出結果 3. 運算邏輯超過10個 2.2 管線使用邏輯 %&gt;% 解釋 function(data) data %&gt;% function() z &lt;- c(1, 2, NA, 8, 3, NA, 3) sum(is.na(z)) ## [1] 2 library(dplyr) z %&gt;% is.na() %&gt;% sum() ## [1] 2 假設我們想要探索mtcars裡面的資料 題目： 請問在馬力(hp)大於100匹的車子中，平均一加侖能跑幾英里(mpg)與平均車重(wt)是多少？ hw &lt;- mtcars[which(mtcars$hp&gt;100),] avg_mpg &lt;- mean(hw$mpg) avg_wt &lt;- mean(hw$wt) print(c(avg_mpg, avg_wt)) ## [1] 17.452174 3.569652 library(dplyr) mtcars %&gt;% filter(hp&gt;100) %&gt;% summarise(avg.mpg=mean(mpg), avg.wt=mean(wt)) ## avg.mpg avg.wt ## 1 17.45217 3.569652 2.3 dplyr資料轉換 dplyr中整理資料的重要函數： - filter() 篩選變數邏輯 - arrange() 排列順序 - select() 選擇變數 - mutate() 新增變數 - summarise() 摘要 - group_by() 分組 2.3.1 filter() mtcars %&gt;% filter(hp&gt;100) %&gt;% pull(hp) ## [1] 110 110 110 175 105 245 123 123 180 180 180 205 215 230 150 150 245 175 113 264 175 335 109 2.3.2 arrange() mtcars %&gt;% filter(hp&gt;100) %&gt;% arrange(desc(hp)) %&gt;% pull(hp) ## [1] 335 264 245 245 230 215 205 180 180 180 175 175 175 150 150 123 123 113 110 110 110 109 105 2.3.3 select() mtcars %&gt;% select(cyl, mpg) ## cyl mpg ## Mazda RX4 6 21.0 ## Mazda RX4 Wag 6 21.0 ## Datsun 710 4 22.8 ## Hornet 4 Drive 6 21.4 ## Hornet Sportabout 8 18.7 ## Valiant 6 18.1 ## Duster 360 8 14.3 ## Merc 240D 4 24.4 ## Merc 230 4 22.8 ## Merc 280 6 19.2 ## Merc 280C 6 17.8 ## Merc 450SE 8 16.4 ## Merc 450SL 8 17.3 ## Merc 450SLC 8 15.2 ## Cadillac Fleetwood 8 10.4 ## Lincoln Continental 8 10.4 ## Chrysler Imperial 8 14.7 ## Fiat 128 4 32.4 ## Honda Civic 4 30.4 ## Toyota Corolla 4 33.9 ## Toyota Corona 4 21.5 ## Dodge Challenger 8 15.5 ## AMC Javelin 8 15.2 ## Camaro Z28 8 13.3 ## Pontiac Firebird 8 19.2 ## Fiat X1-9 4 27.3 ## Porsche 914-2 4 26.0 ## Lotus Europa 4 30.4 ## Ford Pantera L 8 15.8 ## Ferrari Dino 6 19.7 ## Maserati Bora 8 15.0 ## Volvo 142E 4 21.4 2.3.4 mutate() mtcars %&gt;% mutate(newhp=log(hp)) %&gt;% glimpse() ## Rows: 32 ## Columns: 12 ## $ mpg &lt;dbl&gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.~ ## $ cyl &lt;dbl&gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8, 8, 8, 8, 4, 4, 4, 8, ~ ## $ disp &lt;dbl&gt; 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8, 167.6, 167.6, 275.8, 275~ ## $ hp &lt;dbl&gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180, 205, 215, 230, 66, 5~ ## $ drat &lt;dbl&gt; 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92, 3.07, 3.07, 3.07, 2.9~ ## $ wt &lt;dbl&gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, 3.440, 3.440, 4.070, 3.7~ ## $ qsec &lt;dbl&gt; 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00, 22.90, 18.30, 18.90, 17.40, 17.~ ## $ vs &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, ~ ## $ am &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, ~ ## $ gear &lt;dbl&gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 3, 3, 4, 5, 5, 5, ~ ## $ carb &lt;dbl&gt; 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 2, 2, 4, ~ ## $ newhp &lt;dbl&gt; 4.700480, 4.700480, 4.532599, 4.700480, 5.164786, 4.653960, 5.501258, 4.127134, 4.55387~ 2.3.5 summarise() mtcars %&gt;% summarise(sum_mpg=sum(mpg)) ## sum_mpg ## 1 642.9 2.3.6 group_by() mtcars %&gt;% group_by(cyl) %&gt;% summarise(sum_mpg=sum(mpg)) ## # A tibble: 3 x 2 ## cyl sum_mpg ## * &lt;dbl&gt; &lt;dbl&gt; ## 1 4 293. ## 2 6 138. ## 3 8 211. NOTE：詳細可以參考dplyr cran或是R for Data Science:Data transformation 2.4 reshape2 library(reshape2) wb &lt;- read.csv(&quot;c:/Users/Juan/Desktop/rproject/wb_small.csv&quot;, sep = &quot;&quot;) head(wb) ## Country.Name X2020..2020. X2021..2021. X2022..2022. ## 1 Afghanistan -5.5 2.5 3.3 ## 2 Albania -6.7 5.1 4.4 ## 3 Algeria -6.5 3.8 2.1 ## 4 Angola -4.0 0.9 3.5 ## 5 Argentina -10.6 4.9 1.9 ## 6 Armenia -8.0 3.1 4.5 wb_melt &lt;- reshape2::melt(wb, id.var=&quot;Country.Name&quot;) head(wb_melt) ## Country.Name variable value ## 1 Afghanistan X2020..2020. -5.5 ## 2 Albania X2020..2020. -6.7 ## 3 Algeria X2020..2020. -6.5 ## 4 Angola X2020..2020. -4.0 ## 5 Argentina X2020..2020. -10.6 ## 6 Armenia X2020..2020. -8.0 "],["常用指令.html", "Chapter 3 常用指令 3.1 管理環境空間 3.2 程式相關 3.3 字串相關 3.4 常用指令大全", " Chapter 3 常用指令 3.1 管理環境空間 attach() 增加工作環境中指定資料內的變數 detach() 與上述相反 rm(list=ls()) 從工作環境移除所有的向量、列表、資料框等等。 rm()刪除特定的向量、列表、資料框等等。 save.image()儲存環境空間內所有的資料與結果。 load() 讀取rda檔 3.2 程式相關 print() 顯示資料框、向量、列表等等，但是無法附加上文字。 source() R可以讀取既有指令的檔案，在不必開啟命令稿的情況下直接執行多行程式，可節省許多篇幅以及時間。 如： sink(&quot;twohistograms.R&quot;) #define a new script file cat(&quot;set.seed(02138)&quot;) #input a function that sets starting number for random number cat(&quot;\\n&quot;) #end of line cat(&quot;#write R script to a file without opening a document&quot;) cat(&quot;\\n&quot;) #end of line cat(&quot;fnorm&lt;-function(mu){ #create a function with a parameter: mu sample.o&lt;-rnorm(20,mu,1/sqrt(mu)) #define the 1st vector that generates random numbers sample.i&lt;-sample.o+runif(1,0,10) #define the 2nd vector that generates random numbers par(mfrow=c(1,2)) #set parameter of graphic for 1*2 graphics hist(sample.o, col=1, main=&#39;&#39;, #histogram with Basic R xlab=&#39;Original sample&#39;) hist(sample.i, col=4, main=&#39;&#39;, #another histogram xlab=&#39;Original sample + random number&#39;) }&quot;) cat(&quot;\\n&quot;) #end of function sink() #save the script in the specified file file.show(&quot;twohistograms.R&quot;) #Opening an editor to show the script source(&quot;twohistograms.R&quot;) fnorm(1) with() 當環境空間有一個以上的資料框，為了避免混淆，可以使用該指令進行分析 par(mfrow=c(1,2)) library(car) with(Duncan, hist(income, col=2)) with(Salaries, hist(salary, col=6)) - names() 顯示資料框的變數名稱 names(mtcars) ## [1] &quot;mpg&quot; &quot;cyl&quot; &quot;disp&quot; &quot;hp&quot; &quot;drat&quot; &quot;wt&quot; &quot;qsec&quot; &quot;vs&quot; &quot;am&quot; &quot;gear&quot; &quot;carb&quot; which() 顯示特定變數 which(Orange$circumference&gt;100) ## [1] 4 5 6 7 10 11 12 13 14 18 19 20 21 24 25 26 27 28 32 33 34 35 oc&lt;-which(Orange$circumference&gt;100) #create a vector #of data that meets a condition Orange[oc,] #match data with the vector ## Tree age circumference ## 4 1 1004 115 ## 5 1 1231 120 ## 6 1 1372 142 ## 7 1 1582 145 ## 10 2 664 111 ## 11 2 1004 156 ## 12 2 1231 172 ## 13 2 1372 203 ## 14 2 1582 203 ## 18 3 1004 108 ## 19 3 1231 115 ## 20 3 1372 139 ## 21 3 1582 140 ## 24 4 664 112 ## 25 4 1004 167 ## 26 4 1231 179 ## 27 4 1372 209 ## 28 4 1582 214 ## 32 5 1004 125 ## 33 5 1231 142 ## 34 5 1372 174 ## 35 5 1582 177 rep(A, n) 重複A數值或者字串n次 rep(3, 5) ## [1] 3 3 3 3 3 c(rep(&quot;大&quot;, 3), rep(&quot;中&quot;, 1), rep(&quot;小&quot;,2)) ## [1] &quot;大&quot; &quot;大&quot; &quot;大&quot; &quot;中&quot; &quot;小&quot; &quot;小&quot; seq(i,j) 傳回i到j的連續數字 seq(1,10) ## [1] 1 2 3 4 5 6 7 8 9 10 seq(100,110, by=2) ## [1] 100 102 104 106 108 110 seq(i:j) 傳回i到j的順位數字 seq(5:10) ## [1] 1 2 3 4 5 6 seq(100:110) ## [1] 1 2 3 4 5 6 7 8 9 10 11 3.3 字串相關 grep() latvija&lt;-c(&quot;Daugavpils&quot;,&quot;Jēkabpils&quot;,&quot;Jelgava Liepāja&quot;,&quot;Rēzekne&quot;,&quot;Rīga&quot;,&quot;Valmiera&quot;, &quot;Ventspils&quot;) grep(&quot;pils&quot;, latvija) ## [1] 1 2 7 latvija[grep(&quot;pils&quot;, latvija)] ## [1] &quot;Daugavpils&quot; &quot;J&lt;U+0113&gt;kabpils&quot; &quot;Ventspils&quot; dat&lt;-read.csv(&quot;c:/Users/Juan/Desktop/rproject/opendata106N0101.csv&quot;, header=T, fileEncoding = &quot;utf-8&quot;) district&lt;-dat[grep(&quot;區&quot;, dat$code), ] head(dat, n=3) ## code 年底人口數 土地面積 人口密度 ## 1 新北市板橋區 551480 23.1373 23835 ## 2 新北市三重區 387484 16.3170 23747 ## 3 新北市中和區 413590 20.1440 20532 L &lt;- list(a&lt;-c(&#39;lecture&#39;, &#39;movie&#39;), b&lt;-c(&#39;Movie channel&#39;), c=c(1:10), d&lt;-c(&#39;movie&#39;,&#39;food&#39;, &quot;news&quot;,&#39;car&#39;,&#39;music&#39;)) match.s&lt;-grep(&#39;movie&#39;, L) ; match.s ## [1] 1 4 L[grep(&#39;movie&#39;, L)] ## [[1]] ## [1] &quot;lecture&quot; &quot;movie&quot; ## ## [[2]] ## [1] &quot;movie&quot; &quot;food&quot; &quot;news&quot; &quot;car&quot; &quot;music&quot; -gsub() 取代符合條件的字串。以上述為例，假設我們想把「臺」一律改為「台」 library(dplyr) dat2 &lt;- dat %&gt;% mutate(code=gsub(&quot;臺&quot;, &quot;台&quot;, dat$code)) dat2[grep(&#39;台北市&#39;, dat2$code), ] ## code 年底人口數 土地面積 人口密度 ## 30 台北市松山區 206988 9.2878 22286 ## 31 台北市信義區 225753 11.2077 20143 ## 32 台北市大安區 309969 11.3614 27283 ## 33 台北市中山區 230710 13.6821 16862 ## 34 台北市中正區 159608 7.6071 20981 ## 35 台北市大同區 129278 5.6815 22754 ## 36 台北市萬華區 191850 8.8522 21673 ## 37 台北市文山區 274424 31.5090 8709 ## 38 台北市南港區 122155 21.8424 5593 ## 39 台北市內湖區 287771 31.5787 9113 ## 40 台北市士林區 288295 62.3682 4622 ## 41 台北市北投區 256456 56.8216 4513 substr()：擷取符合起始與結束字元的字串。 dat3 &lt;- dat %&gt;% mutate(city=substr(dat$code, 1, 3)) head(dat3, n=3) ## code 年底人口數 土地面積 人口密度 city ## 1 新北市板橋區 551480 23.1373 23835 新北市 ## 2 新北市三重區 387484 16.3170 23747 新北市 ## 3 新北市中和區 413590 20.1440 20532 新北市 sub() and gsub() country&lt;-c( &quot;United States&quot;, &quot;Republic of Kenya&quot;, &quot;Republic of Korea&quot;) sub(&#39;Republic of&#39;, &#39;&#39;, country) ## [1] &quot;United States&quot; &quot; Kenya&quot; &quot; Korea&quot; zodiac&lt;-c( &quot;(mouse)&quot;, &quot;(ox)&quot;, &quot;(tiger)&quot;, &quot;(rabbit)&quot;, &quot;(dragon)&quot;) zodiac&lt;-sub(&quot;\\\\(&quot;,&quot;&quot;, zodiac) sub(&quot;\\\\)&quot;,&quot;&quot;, zodiac) ## [1] &quot;mouse&quot; &quot;ox&quot; &quot;tiger&quot; &quot;rabbit&quot; &quot;dragon&quot; country&lt;-c(&quot;People&#39;s Republic of China Democratic Republic of Congo&quot;, &quot;United States&quot;, &quot;Republic of Kenya&quot;, &quot;Republic of Korea&quot;, &quot;Democratic People&#39;s Republic of Korea&quot;) country[grep(&#39;^Republic of&#39;, country)] ## [1] &quot;Republic of Kenya&quot; &quot;Republic of Korea&quot; gsub(&quot;^Republic of&quot;, &quot;&quot;, country) #`^` means from the start ;`$` from the end ## [1] &quot;People&#39;s Republic of China\\n Democratic Republic of Congo&quot; ## [2] &quot;United States&quot; ## [3] &quot; Kenya&quot; ## [4] &quot; Korea&quot; ## [5] &quot;Democratic People&#39;s Republic of Korea&quot; strsplit() document &lt;- c(&quot;When in the Course of human events, it becomes necessary for one people to dissolve the political bands which have connected them with another, and to assume among the powers of the earth, the separate and equal station to which the Laws of Nature and of Nature&#39;s God entitle them, a decent respect to the opinions of mankind requires that they should declare the causes which impel them to the separation. We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness.--That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, --That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn, that mankind are more disposed to suffer, while evils are sufferable, than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security.--Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world. He has refused his Assent to Laws, the most wholesome and necessary for the public good. He has forbidden his Governors to pass Laws of immediate and pressing importance, unless suspended in their operation till his Assent should be obtained; and when so suspended, he has utterly neglected to attend to them. He has refused to pass other Laws for the accommodation of large districts of people, unless those people would relinquish the right of Representation in the Legislature, a right inestimable to them and formidable to tyrants only. He has called together legislative bodies at places unusual, uncomfortable, and distant from the depository of their public Records, for the sole purpose of fatiguing them into compliance with his measures. He has dissolved Representative Houses repeatedly, for opposing with manly firmness his invasions on the rights of the people. He has refused for a long time, after such dissolutions, to cause others to be elected; whereby the Legislative powers, incapable of Annihilation, have returned to the People at large for their exercise; the State remaining in the mean time exposed to all the dangers of invasion from without, and convulsions within. He has endeavoured to prevent the population of these States; for that purpose obstructing the Laws for Naturalization of Foreigners; refusing to pass others to encourage their migrations hither, and raising the conditions of new Appropriations of Lands. He has obstructed the Administration of Justice, by refusing his Assent to Laws for establishing Judiciary powers. He has made Judges dependent on his Will alone, for the tenure of their offices, and the amount and payment of their salaries. He has erected a multitude of New Offices, and sent hither swarms of Officers to harrass our people, and eat out their substance. He has kept among us, in times of peace, Standing Armies without the Consent of our legislatures. He has affected to render the Military independent of and superior to the Civil power. He has combined with others to subject us to a jurisdiction foreign to our constitution, and unacknowledged by our laws; giving his Assent to their Acts of pretended Legislation: For Quartering large bodies of armed troops among us: For protecting them, by a mock Trial, from punishment for any Murders which they should commit on the Inhabitants of these States: For cutting off our Trade with all parts of the world: For imposing Taxes on us without our Consent: For depriving us in many cases, of the benefits of Trial by Jury: For transporting us beyond Seas to be tried for pretended offences. For abolishing the free System of English Laws in a neighbouring Province, establishing therein an Arbitrary government, and enlarging its Boundaries so as to render it at once an example and fit instrument for introducing the same absolute rule into these Colonies: For taking away our Charters, abolishing our most valuable Laws, and altering fundamentally the Forms of our Governments: For suspending our own Legislatures, and declaring themselves invested with power to legislate for us in all cases whatsoever. He has abdicated Government here, by declaring us out of his Protection and waging War against us. He has plundered our seas, ravaged our Coasts, burnt our towns, and destroyed the lives of our people. He is at this time transporting large Armies of foreign Mercenaries to compleat the works of death, desolation and tyranny, already begun with circumstances of Cruelty &amp; perfidy scarcely paralleled in the most barbarous ages, and totally unworthy the Head of a civilized nation. He has constrained our fellow Citizens taken Captive on the high Seas to bear Arms against their Country, to become the executioners of their friends and Brethren, or to fall themselves by their Hands. He has excited domestic insurrections amongst us, and has endeavoured to bring on the inhabitants of our frontiers, the merciless Indian Savages, whose known rule of warfare, is an undistinguished destruction of all ages, sexes and conditions. In every stage of these Oppressions We have Petitioned for Redress in the most humble terms: Our repeated Petitions have been answered only by repeated injury. A Prince whose character is thus marked by every act which may define a Tyrant, is unfit to be the ruler of a free people. Nor have We been wanting in attentions to our Brittish brethren. We have warned them from time to time of attempts by their legislature to extend an unwarrantable jurisdiction over us. We have reminded them of the circumstances of our emigration and settlement here. We have appealed to their native justice and magnanimity, and we have conjured them by the ties of our common kindred to disavow these usurpations, which, would inevitably interrupt our connections and correspondence. They too have been deaf to the voice of justice and of consanguinity. We must, therefore, acquiesce in the necessity, which denounces our Separation, and hold them, as we hold the rest of mankind, Enemies in War, in Peace Friends. We, therefore, the Representatives of the united States of America, in General Congress, Assembled, appealing to the Supreme Judge of the world for the rectitude of our intentions, do, in the Name, and by Authority of the good People of these Colonies, solemnly publish and declare, That these United Colonies are, and of Right ought to be Free and Independent States; that they are Absolved from all Allegiance to the British Crown, &quot;) doc &lt;- c(&quot;and that all political connection between them and the State of Great Britain, is and ought to be totally dissolved; and that as Free and Independent States, they have full Power to levy War, conclude Peace, contract Alliances, establish Commerce, and to do all other Acts and Things which Independent States may of right do. And for the support of this Declaration, with a firm reliance on the protection of divine Providence, we mutually pledge to each other our Lives, our Fortunes and our sacred Honor.&quot;) tmp &lt;- strsplit(c(document,doc), split=&quot; &quot;) tmp %&gt;% unlist() %&gt;% as_tibble() %&gt;% count(value) %&gt;% arrange(desc(n)) ## # A tibble: 633 x 2 ## value n ## &lt;chr&gt; &lt;int&gt; ## 1 of 76 ## 2 the 75 ## 3 to 64 ## 4 and 55 ## 5 our 25 ## 6 for 20 ## 7 has 20 ## 8 their 20 ## 9 He 18 ## 10 in 18 ## # ... with 623 more rows 3.4 常用指令大全 3.4.1 基本相關 基本函數 功能 library(套件) 載入套件 data(資料檔) 載入資料檔 head(資料檔, n) 顯示資料檔前n筆資料，預設n=6 tail(資料檔, n) 顯示資料檔後n筆資料，預設n=6 setwd(“PATH”) 改變工作目錄 getwd() 取得工作目錄 length() 計算物件中元素的數量 mode() 取得物件的資料型態 class() 取得物件的類別 str() 取得物件的資料結構 rm(list=ls());gc() 清除所有物件 3.4.2 數學相關 數學函數 功能 sum() 傳回元素總和 abs() 傳回絕對值 sqrt() 傳回開根號值 ceiling(x) 傳回大於等於x的最小整數 floor(x) 傳回小於等於x的最大整數 round(x,n) 將x四捨五入到第n位 trunc(x) 傳回x的整數部分 max() 傳回最大值 min() 傳回最小值 sign() 判斷正負號 log(x,base) 對數函數 sin();cos();tan();asin();acos;atan() 三角函數與反三角函數 mean() 傳回平均值 median() 傳回中位數 table() 計數 var() 傳回變異數 sd() 傳回標準差 range() 傳回最大值與最小值 IQR() 傳回四分位距 cor(x,y) 傳回x及y的相關係數 3.4.3 物件相關 物件邏輯函數 功能 %/% 整除 %% 求餘數 %*% 矩陣相乘 %in% 判斷是否在某集合內 | 或(OR) &amp; 且(AND) ! 否(NOT) seq(from, to , by) 產生以by為遞增的向量 assign(‘物件名稱’,運算式) 建立物件並將運算式值存入 c() 建立向量物件 array(x,dim=()) 依照dim維度建立array物件 matrix(x, nrow, ncol, byrow) 建立x為nrow*ncol矩陣、byrow=T時以烈的順序排列 factor(x, levels=c()) 依照levels排列建立factor物件 data.frame() 建立data.frame物件 list(name=value1,….) 建立list物件 rbind() 依列合併 cbind() 依行合併 t() 轉置矩陣 det() 求矩陣行列式值 edit() 以試算表方式編輯物件資料 View() 以試算表方式顯示物件資料 fix() 以試算表方式修改物件資料 scan() 資料輸入 file.choose() 以視窗選取代替路徑 as. 各種物件轉換 3.4.4 作圖相關 繪圖函數 功能 plot(x) 以序號為橫坐標(x軸)、y為縱座標(y軸)來繪圖 plot(x,y) 以x(x軸)和y(y軸)來繪圖 pie(x) 繪製圓餅圖 boxplot(x) 繪製盒形圖 stem(x) 繪製莖葉圖 dotchart(x) 繪製點圖 hist(x) 繪製直方圖 barplot(x) 繪製條形圖 contour(x,y,z) 繪製等高線圖 point(x,y) 加上點圖 line(x,y) 加上直線 text(x,y,labels) 在指定位置寫出指定文字 abline(a,b) 加上直線(y=ax+b) legend(x,y,legend) 在指定位置加上圖例 title(main,sub) 加上標題或副標題 par(margin=c(a,b,c,d)) 設定底部、左邊、上方以及右邊的邊界值 par(mfcol=c(a,b)) 以a*b矩陣將多張圖形畫在同一頁(按照行的順序畫圖) par(mfrow=c(a,b)) 以a*b矩陣將多張圖形畫在同一頁(按照列的順序畫圖) 3.4.5 其它相關 其它函數 功能 na.omit;na.exclude() 刪除NA值 is.na() 判斷元素是否為NA na.rm=T 在某些函數內使用的參數，可以刪除NA值 proc.time();system.time() 測量程式碼執行時間 system(“command”) 呼叫系統函數 Sys.time() 回傳電腦上的時間 Sys.sleep(x) 讓城市戰時挺只執行x秒 "]]
